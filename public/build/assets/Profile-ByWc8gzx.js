import{r as a,j as e,H as N}from"./app-_tcWvRHw.js";import{C as w}from"./CompaniesPanelLayout-D2wewtRv.js";import"./DashboardLayout-Dotb40vo.js";import"./AnimatedIcon-D_as9RWF.js";import"./index-D3vds0s7.js";import"./index-DoyJDsUh.js";function A(){const[u,d]=a.useState(!1),[c,x]=a.useState(""),[p,m]=a.useState(!0),[n,b]=a.useState(""),[o,f]=a.useState([]),[g,r]=a.useState(""),j=a.useMemo(()=>[{key:"profile",label:"Profile",href:route("admin.companies.profile")},{key:"partners",label:"Partners",href:route("admin.companies.partners")},{key:"vendors",label:"Vendors",href:route("admin.companies.vendors")}],[]),v=async t=>{const s=await t.text();try{return s?JSON.parse(s):{}}catch{return{}}},h=()=>{m(!0),x("");const t=new URLSearchParams;t.set("status","verified"),n.trim()&&t.set("q",n.trim());const s=route("admin.companies.vendors.data")+`?${t.toString()}`;fetch(s,{credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}}).then(async l=>{const i=await v(l);if(!l.ok)throw new Error(i?.message||"Failed to load vendors");f(Array.isArray(i?.vendors)?i.vendors:[])}).catch(l=>x(l?.message||"Failed to load vendors")).finally(()=>m(!1))};a.useEffect(()=>{h()},[]),a.useEffect(()=>{const t=()=>r("");return document.addEventListener("click",t),()=>document.removeEventListener("click",t)},[]);const y=({i:t})=>e.jsxs("tr",{className:"animate-pulse",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"h-4 w-64 rounded bg-slate-100"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"h-4 w-40 rounded bg-slate-100"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"h-7 w-24 rounded-full bg-slate-100"})}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx("div",{className:"ml-auto h-8 w-8 rounded-lg bg-slate-100"})})]},t);return e.jsxs(w,{title:"Companies",active:"profile",items:j,children:[e.jsx(N,{title:"Companies - Profile"}),e.jsxs("div",{className:"border-b border-slate-200 px-6 py-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Verified Vendors"}),e.jsx("div",{className:"mt-1 text-[12px] text-slate-500",children:"List of vendors that are verified."})]}),e.jsxs("div",{className:"p-6",children:[c?e.jsx("div",{className:"mb-4 rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-[12px] text-rose-700",children:c}):null,e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 border-b border-slate-200 bg-slate-50 px-4 py-3",children:[e.jsx("div",{className:"text-[12px] font-semibold text-slate-900",children:"All verified vendors"}),e.jsxs("div",{className:"flex flex-1 flex-col gap-2 sm:flex-row sm:items-center sm:justify-end",children:[e.jsxs("div",{className:"relative w-full sm:w-80",children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:e.jsx("svg",{viewBox:"0 0 24 24",className:"h-4 w-4",fill:"none",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-4.3-4.3m1.8-4.7a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{value:n,onChange:t=>b(t.target.value),className:"w-full rounded-xl border border-slate-200 bg-white px-3 py-2 pl-9 text-[12px]",placeholder:"Search vendor or TIN"})]}),e.jsx("button",{type:"button",onClick:h,disabled:p,className:"rounded-xl border border-slate-200 bg-white px-4 py-2 text-[12px] font-semibold text-slate-900 hover:bg-slate-50 disabled:opacity-60",children:"Search"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[e.jsx("thead",{className:"bg-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-[11px] font-semibold uppercase tracking-wide text-slate-600",children:"Vendor"}),e.jsx("th",{className:"px-4 py-3 text-left text-[11px] font-semibold uppercase tracking-wide text-slate-600",children:"TIN"}),e.jsx("th",{className:"px-4 py-3 text-left text-[11px] font-semibold uppercase tracking-wide text-slate-600",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-right text-[11px] font-semibold uppercase tracking-wide text-slate-600",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 bg-white",children:p?e.jsx(e.Fragment,{children:Array.from({length:7}).map((t,s)=>e.jsx(y,{i:s},s))}):o.length?o.map(t=>e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsx("td",{className:"px-4 py-3 text-[12px] font-semibold text-slate-900",children:t.company_name}),e.jsx("td",{className:"px-4 py-3 text-[12px] text-slate-700",children:t.tin_number}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border border-emerald-200 bg-emerald-50 px-3 py-1.5 text-[11px] font-semibold text-emerald-700",children:[e.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-500"}),"verified"]})}),e.jsxs("td",{className:"relative px-4 py-3 text-right",children:[e.jsx("button",{type:"button",onClick:s=>{s.stopPropagation(),r(l=>String(l)===String(t.id)?"":String(t.id))},className:"inline-flex h-8 w-8 items-center justify-center rounded-lg border border-slate-200 bg-white text-slate-700 shadow-sm hover:bg-slate-50","aria-label":"Actions",children:e.jsx("span",{className:"text-lg leading-none",children:"â‹¯"})}),String(g)===String(t.id)?e.jsxs("div",{className:"absolute right-4 top-12 z-20 w-44 overflow-hidden rounded-xl border border-slate-200 bg-white shadow-lg",onClick:s=>s.stopPropagation(),children:[e.jsx("button",{type:"button",onClick:()=>{r(""),d(!0),window.setTimeout(()=>d(!1),350)},className:"block w-full px-4 py-2 text-left text-[12px] font-semibold text-slate-700 hover:bg-slate-50",children:"Logs"}),e.jsx("button",{type:"button",onClick:()=>{r(""),alert("Coming soon")},className:"block w-full px-4 py-2 text-left text-[12px] font-semibold text-slate-700 hover:bg-slate-50",children:"Coming soon"}),e.jsx("button",{type:"button",onClick:()=>{r(""),alert("More")},className:"block w-full px-4 py-2 text-left text-[12px] font-semibold text-slate-700 hover:bg-slate-50",children:"More"})]}):null]})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-4 py-10 text-center text-[12px] text-slate-500",children:"No verified vendors found."})})})]})}),e.jsx("div",{className:"px-4 py-3 text-[11px] text-slate-500",children:u?"Updating...":`Showing ${o.length} vendor(s)`})]})]})]})}export{A as default};
