import{r as l,j as e,H as b,L as f}from"./app-_tcWvRHw.js";import{R as j}from"./RealEstatePanelLayout-MWmKt_Sl.js";import"./DashboardLayout-Dotb40vo.js";import"./AnimatedIcon-D_as9RWF.js";import"./index-D3vds0s7.js";import"./index-DoyJDsUh.js";function _(){const[i,n]=l.useState(!0),[o,d]=l.useState(""),[r,x]=l.useState(""),[c,p]=l.useState([]),h=async s=>{const t=await s.text();try{return t?JSON.parse(t):{}}catch{return{}}},u=l.useMemo(()=>[{key:"properties",label:"Properties",href:route("admin.real-estate.properties")},{key:"bookings",label:"Bookings",href:route("admin.real-estate.bookings")},{key:"clients",label:"Clients",href:route("admin.real-estate.clients")}],[]),m=()=>{n(!0),d("");const s=new URL(route("admin.real-estate.clients.data"));r.trim()&&s.searchParams.set("q",r.trim()),fetch(s.toString(),{credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}}).then(async t=>{const a=await h(t);if(!t.ok)throw new Error(a?.message||"Failed to load clients");p(Array.isArray(a?.clients)?a.clients:[])}).catch(t=>d(t?.message||"Failed to load clients")).finally(()=>n(!1))};return l.useEffect(()=>{m()},[]),e.jsxs(j,{title:"Real Estate",active:"clients",items:u,children:[e.jsx(b,{title:"Real Estate - Clients"}),e.jsxs("div",{className:"border-b border-slate-200 px-6 py-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Clients"}),e.jsx("div",{className:"mt-1 text-[12px] text-slate-500",children:"People who have made booking requests."})]}),e.jsxs("div",{className:"p-6",children:[o?e.jsx("div",{className:"mb-4 rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-[12px] text-rose-700",children:o}):null,e.jsx("div",{className:"mb-4 rounded-2xl border border-slate-200 bg-white px-4 py-3 shadow-sm",children:e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("div",{className:"text-[12px] font-semibold text-slate-900",children:"All clients"}),e.jsxs("div",{className:"flex flex-1 flex-col gap-2 sm:flex-row sm:items-center sm:justify-end",children:[e.jsxs("div",{className:"relative w-full sm:w-96",children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:e.jsx("svg",{viewBox:"0 0 24 24",className:"h-4 w-4",fill:"none",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-4.3-4.3m1.8-4.7a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{value:r,onChange:s=>x(s.target.value),className:"w-full rounded-xl border border-slate-200 bg-white px-3 py-2 pl-9 text-[12px]",placeholder:"Search name, phone, email"})]}),e.jsx("button",{type:"button",onClick:m,disabled:i,className:"rounded-xl border border-slate-200 bg-white px-4 py-2 text-[12px] font-semibold text-slate-900 hover:bg-slate-50 disabled:opacity-60",children:"Search"})]})]})}),e.jsx("div",{className:"grid gap-4 sm:grid-cols-2 xl:grid-cols-3",children:i?Array.from({length:6}).map((s,t)=>e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsx("div",{className:"h-4 w-2/3 animate-pulse rounded bg-slate-100"}),e.jsx("div",{className:"mt-3 h-4 w-1/2 animate-pulse rounded bg-slate-100"}),e.jsx("div",{className:"mt-3 h-4 w-full animate-pulse rounded bg-slate-100"}),e.jsx("div",{className:"mt-6 h-9 w-24 animate-pulse rounded-xl bg-slate-100"})]},t)):c.length?c.map(s=>e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsx("div",{className:"text-[12px] font-semibold text-slate-900 line-clamp-1",children:s.full_name||"Client"}),e.jsxs("div",{className:"mt-2 text-[12px] text-slate-600",children:[e.jsx("div",{className:"line-clamp-1",children:s.phone_number||"-"}),e.jsx("div",{className:"line-clamp-1",children:s.email||"-"})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between rounded-xl border border-slate-200 bg-slate-50 px-3 py-2",children:[e.jsx("div",{className:"text-[11px] font-semibold text-slate-600",children:"Total requests"}),e.jsx("div",{className:"text-[12px] font-semibold text-slate-900",children:s.bookings_count??0})]}),e.jsxs("div",{className:"mt-3 text-[11px] font-semibold text-slate-500",children:["Last booking: ",s.last_booking_at?new Date(s.last_booking_at).toLocaleString():"-"]}),e.jsx("div",{className:"mt-5 flex items-center justify-end",children:e.jsx(f,{href:route("admin.real-estate.clients.show",s.client_key),className:"rounded-xl bg-slate-900 px-4 py-2 text-[12px] font-semibold text-white hover:bg-slate-800",children:"View"})})]},s.client_key)):e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 text-[12px] text-slate-600 shadow-sm sm:col-span-2 xl:col-span-3",children:"No clients found"})})]})]})}export{_ as default};
