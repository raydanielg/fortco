import{r as a,j as s,H as C}from"./app-_tcWvRHw.js";import{D as E}from"./DashboardLayout-Dotb40vo.js";import{L as j,B as L,P as v,D as M,C as R,a as _,b as D,c as S,d as P,A as O,e as T,p as U,f as B}from"./index-CWinhnPK.js";import"./AnimatedIcon-D_as9RWF.js";import"./index-D3vds0s7.js";import"./index-DoyJDsUh.js";R.register(_,D,S,P,O,T,U,B);function d({label:r,value:n}){return s.jsxs("div",{className:"h-full rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[s.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:r}),s.jsx("div",{className:"mt-2 text-3xl font-semibold tracking-tight text-slate-900",children:n})]})}function $(){const[r,n]=a.useState(null),[f,p]=a.useState(!1),[c,h]=a.useState(""),m=a.useRef(null),i=r?.kpis||{},e=r?.series||{},t=r?.pies||{},x=a.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}},scales:{x:{grid:{display:!1}},y:{beginAtZero:!0,ticks:{precision:0}}}}),[]),b=a.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}),[]),N=a.useMemo(()=>({labels:e.labels||[],datasets:[{label:"Users created",data:e.users_created||[],borderColor:"#0f172a",backgroundColor:"rgba(15, 23, 42, 0.10)",tension:.35,pointRadius:2}]}),[e.labels,e.users_created]),w=a.useMemo(()=>({labels:e.labels||[],datasets:[{label:"Employees created",data:e.employees_created||[],backgroundColor:"rgba(14, 165, 233, 0.45)",borderColor:"#0ea5e9",borderWidth:1}]}),[e.labels,e.employees_created]),y=a.useMemo(()=>({labels:e.labels||[],datasets:[{label:"Logins",data:e.logins||[],borderColor:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.10)",tension:.35,pointRadius:2}]}),[e.labels,e.logins]),u=a.useMemo(()=>({labels:t?.tasks?.labels||[],datasets:[{data:t?.tasks?.values||[],backgroundColor:["#0ea5e9","#10b981","#f59e0b","#ef4444","#64748b"],borderWidth:0}]}),[t?.tasks?.labels,t?.tasks?.values]),k=a.useMemo(()=>({labels:t?.messages?.labels||["Unread","Read"],datasets:[{data:t?.messages?.values||[0,0],backgroundColor:["#ef4444","#10b981"],borderWidth:0}]}),[t?.messages?.labels,t?.messages?.values]);return a.useEffect(()=>{let o=!0;const g=async()=>{p(!0),h("");try{const l=await fetch(route("admin.analytics.data"),{headers:{Accept:"application/json"}});if(!l.ok)throw new Error(`HTTP ${l.status}`);const A=await l.json();o&&n(A)}catch(l){o&&h(String(l?.message||l||"Failed to load analytics"))}finally{o&&p(!1)}};return g(),m.current=setInterval(g,15e3),()=>{o=!1,m.current&&clearInterval(m.current)}},[]),s.jsxs(E,{title:"Admin Analytics",breadcrumbs:["Home","Analytics"],children:[s.jsx(C,{title:"Admin Analytics"}),s.jsxs("div",{className:"grid gap-6",children:[s.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[s.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold text-slate-900",children:"Analytics"}),s.jsx("div",{className:"mt-1 text-[12px] text-slate-600",children:"Overview charts and KPIs for the system."})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-[12px] font-semibold text-slate-900",children:f?"Updatingâ€¦":c?"Offline":"Online"}),s.jsx("div",{className:"mt-1 text-[11px] text-slate-500",children:"Refresh interval: 15s"})]})]}),c?s.jsx("div",{className:"mt-4 rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-[12px] text-rose-700",children:c}):null]}),s.jsxs("div",{className:"grid auto-rows-fr gap-4 sm:grid-cols-2 lg:grid-cols-5",children:[s.jsx(d,{label:"Users",value:i.users??0}),s.jsx(d,{label:"Employees",value:i.employees??0}),s.jsx(d,{label:"Tasks",value:i.tasks??0}),s.jsx(d,{label:"Messages",value:i.messages??0}),s.jsx(d,{label:"Active sessions",value:i.active_sessions??0})]}),s.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[s.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm lg:col-span-2",children:[s.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Users created (14 days)"}),s.jsx("div",{className:"mt-5 h-[320px]",children:s.jsx(j,{data:N,options:x})})]}),s.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[s.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Logins (14 days)"}),s.jsx("div",{className:"mt-5 h-[320px]",children:s.jsx(j,{data:y,options:x})})]})]}),s.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[s.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[s.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Employees created (bar)"}),s.jsx("div",{className:"mt-5 h-[320px]",children:s.jsx(L,{data:w,options:x})})]}),s.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[s.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Task status (pie)"}),s.jsx("div",{className:"mt-5 h-[320px]",children:s.jsx(v,{data:u,options:b})})]})]}),s.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[s.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[s.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Messages (doughnut)"}),s.jsx("div",{className:"mt-5 h-[320px]",children:s.jsx(M,{data:k,options:b})})]}),s.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[s.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Tasks (alternate view)"}),s.jsx("div",{className:"mt-1 text-[12px] text-slate-600",children:"Same data as the pie, shown with another chart type."}),s.jsx("div",{className:"mt-5 h-[320px]",children:s.jsx(v,{data:u,options:b})})]})]})]})]})}export{$ as default};
