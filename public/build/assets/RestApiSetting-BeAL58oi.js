import{r as a,j as t}from"./app-Be5uCMNC.js";import j from"./SettingsSectionShell-BKQE600h.js";import{F as g}from"./CircleStackIcon-Cph6t4XK.js";import{F as v}from"./ArrowPathIcon--9mEof5Y.js";import{F as w}from"./MagnifyingGlassIcon-BttqfDqv.js";function R(){const[l,h]=a.useState(""),[d,c]=a.useState(!1),[x,m]=a.useState(""),[o,b]=a.useState([]),p=()=>{c(!0),m(""),fetch(route("admin.rest-api.inventory"),{credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}}).then(async s=>{const e=await s.text();let r={};try{r=e?JSON.parse(e):{}}catch{r={}}if(!s.ok)throw new Error(r?.message||"Failed to load inventory");b(Array.isArray(r?.routes)?r.routes:[])}).catch(s=>m(s?.message||"Failed to load inventory")).finally(()=>c(!1))};a.useEffect(()=>{p()},[]);const n=a.useMemo(()=>{const s=String(l||"").trim().toLowerCase();return s?o.filter(e=>{const r=Array.isArray(e.methods)?e.methods.join(","):"";return String(e.uri||"").toLowerCase().includes(s)||String(e.name||"").toLowerCase().includes(s)||String(e.module||"").toLowerCase().includes(s)||String(e.description||"").toLowerCase().includes(s)||r.toLowerCase().includes(s)}):o},[o,l]),u=a.useMemo(()=>{const s={};for(const e of n){const r=e.module||"Core";s[r]||(s[r]=[]),s[r].push(e)}return Object.keys(s).sort((e,r)=>e.localeCompare(r)).map(e=>({module:e,routes:s[e]}))},[n]),f=({m:s})=>{const e=String(s||"").toUpperCase(),r=e==="GET"?"bg-emerald-50 text-emerald-700":e==="POST"?"bg-blue-50 text-blue-700":e==="PUT"||e==="PATCH"?"bg-amber-50 text-amber-700":e==="DELETE"?"bg-red-50 text-red-700":"bg-slate-100 text-slate-700";return t.jsx("span",{className:`rounded-md px-2 py-1 text-[10px] font-semibold ${r}`,children:e})};return t.jsx(j,{title:"",description:"",children:t.jsxs("div",{className:"-m-5 overflow-hidden rounded-2xl border border-slate-200 bg-white",children:[t.jsx("div",{className:"border-b border-slate-200 bg-white",children:t.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 px-6",children:[t.jsxs("div",{className:"my-3 inline-flex items-center gap-2 text-[12px] font-semibold text-slate-900",children:[t.jsx(g,{className:"h-5 w-5"}),"REST API Inventory"]}),t.jsxs("button",{type:"button",onClick:p,className:"my-3 inline-flex items-center gap-2 rounded-xl border border-slate-200 bg-white px-4 py-2 text-[12px] font-semibold text-slate-700 hover:bg-slate-50",children:[t.jsx(v,{className:`h-4 w-4 ${d?"animate-spin":""}`}),"Refresh"]})]})}),x?t.jsx("div",{className:"border-b border-slate-200 bg-red-50 px-6 py-3 text-[12px] text-red-700",children:x}):null,t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[t.jsxs("div",{className:"relative w-full max-w-md",children:[t.jsx(w,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-slate-400"}),t.jsx("input",{value:l,onChange:s=>h(s.target.value),className:"w-full rounded-xl border border-slate-200 bg-white py-2.5 pl-10 pr-4 text-[12px] text-slate-900 focus:border-slate-300 focus:outline-none",placeholder:"Search: module, uri, name, method…"})]}),t.jsx("div",{className:"text-[12px] text-slate-500",children:d?"Loading…":`${n.length} endpoints`})]}),t.jsx("div",{className:"mt-4 grid gap-4",children:u.length?u.map(s=>t.jsxs("div",{className:"overflow-hidden rounded-xl border border-slate-200 bg-white",children:[t.jsxs("div",{className:"border-b border-slate-200 bg-slate-50 px-4 py-3",children:[t.jsx("div",{className:"text-[12px] font-semibold text-slate-900",children:s.module}),t.jsxs("div",{className:"mt-1 text-[12px] text-slate-500",children:[s.routes.length," endpoints"]})]}),t.jsx("div",{className:"divide-y divide-slate-200",children:s.routes.map((e,r)=>t.jsxs("div",{className:"px-4 py-3",children:[t.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[(e.methods||[]).map(i=>t.jsx(f,{m:i},i)),t.jsx("div",{className:"font-mono text-[11px] font-semibold text-slate-900 break-all",children:e.uri})]}),t.jsx("div",{className:"text-[11px] text-slate-500",children:e.name||""})]}),t.jsx("div",{className:"mt-2 text-[12px] text-slate-600",children:e.description||""}),t.jsx("div",{className:"mt-2 text-[11px] text-slate-500 break-all",children:e.action||""})]},`${e.uri}-${r}`))})]},s.module)):t.jsx("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-4 text-[12px] text-slate-600",children:"No API endpoints found."})})]})]})})}export{R as default};
